<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF8">
		<meta NAME="description" content="Collective Artificial Intelligence">
		<meta NAME="keywords" content="artificial intelligence">
		<meta name="language" content="en">
		<meta name="country" content="ca">
		<link href="./css/global.css" rel="stylesheet" type="text/css" />
		<script type="text/javascript" src="./javascript/Main.js"></script>
		<script type="text/javascript" src="./javascript/Concept.js"></script>
		<script type="text/javascript" src="./javascript/VerbBranch.js"></script>
		<script type="text/javascript" src="./javascript/ConceptNameMapper.js"></script>
		<script type="text/javascript" src="./javascript/TautologyManager.js"></script>
		<script type="text/javascript" src="./javascript/Instinct.js"></script>
		<script type="text/javascript" src="./javascript/Statement.js"></script>
		<script type="text/javascript" src="./javascript/ComplementaryOperatorManager.js"></script>
		<script type="text/javascript" src="./javascript/MutuallyExclusiveOperatorManager.js"></script>
		<script type="text/javascript" src="./javascript/EvaluationCache.js"></script>
		<script type="text/javascript" src="./javascript/ProofCache.js"></script>
		<script type="text/javascript" src="./javascript/Flattenizer.js"></script>
		<script type="text/javascript" src="./javascript/Optimizer.js"></script>
		<script type="text/javascript" src="./javascript/Invalidator.js"></script>
		<script type="text/javascript" src="./javascript/ProofManager.js"></script>
		<script type="text/javascript" src="./javascript/ThinkerGeneralizationToParent.js"></script>
		<script type="text/javascript" src="./javascript/ThinkerGeneralizationToBrother.js"></script>
		<script type="text/javascript" src="./javascript/ThinkerFindParentOfEnemyBrother.js"></script>
		<script type="text/javascript" src="./javascript/ThinkerFindEnemyBrother.js"></script>
		<script type="text/javascript" src="./javascript/Thinker.js"></script>
		<script type="text/javascript" src="./javascript/Theory.js"></script>
		<script type="text/javascript" src="./javascript/WhatisViewer.js"></script>
		<script type="text/javascript" src="./javascript/DefineViewer.js"></script>
		<script type="text/javascript" src="./javascript/TeachViewer.js"></script>
		<script type="text/javascript" src="./javascript/ObjectionFinder.js"></script>
		<script type="text/javascript" src="./javascript/FirstSecondPersonManager.js"></script>
		<script type="text/javascript" src="./javascript/HumanStatementSplitter.js"></script>
		<script type="text/javascript" src="./javascript/HumanStatementColorizer.js"></script>
		<script type="text/javascript" src="./javascript/AskViewer.js"></script>
		<script type="text/javascript" src="./javascript/History.js"></script>
		<script type="text/javascript" src="./javascript/AutoComplete.js"></script>
		<script type="text/javascript" src="./javascript/TalkingRouter.js"></script>
		<title>Testing</title>
	</head>
	<body>
		<form method="post" onsubmit='sendMessage(talkingRouter);return false;'>
			<div style="overflow:scroll;height:460px" id="conversation"></div>
			<div>
				<input style="width:88%" type="text" id="humanStatementField" name="conversation" autocomplete="off" />
				<button style="width:8%" onclick='sendMessage(talkingRouter);return false;'>Talk</button>
				<div id="autoComplete"></div>
			</div>
		</form>
		
		<script type="text/javascript">
			<!--
			var humanName = "human_dude";
			var aiName = "ai_dude";
			var inputField = document.getElementById('humanStatementField');
			inputField.focus();
			inputField.onkeyup = keyUpHandling;
			
			var talkingRouter = new TalkingRouter(humanName, aiName);
			
			//Send message to Ai
			function sendMessage(talkingRouter)
			{
				var conversationDom = document.getElementById('conversation');
				var humanStatementField = document.getElementById('humanStatementField');
				var humanStatement = humanStatementField.value;
				
				var inputAndOutput = talkingRouter.talkTo(humanStatement);
				
				conversationDom.innerHTML += humanName + ": " + inputAndOutput['input'] + '<br />';
				conversationDom.innerHTML += aiName + ": " + inputAndOutput['output'] + '<br />';
				
				conversationDom.scrollTop = conversationDom.scrollHeight;
				humanStatementField.value = "";
				return false;
			}
			
			//Handles key press events
			function keyUpHandling(e)
			{
				var unicode = getKeyCode(e);
				var key = String.fromCharCode(unicode);

				var rememberedStatement;
				
				if (unicode == 38) //up
				{			
					rememberedStatement = talkingRouter.history.getStatement();
					if (rememberedStatement != null)
					{
						inputField.value = rememberedStatement;
						talkingRouter.history.moveUp();
					}
				}
				else if (unicode == 40) //down
				{
					rememberedStatement = talkingRouter.history.getStatement();
					if (rememberedStatement != null)
					{
						inputField.value = rememberedStatement;
						talkingRouter.history.moveDown();
					}
				}
			}
			-->
		</script>
	</body>
</html>